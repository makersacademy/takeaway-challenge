Was having some trouble with dependency injection and getting everything to work
so ended up putting everything in the one file and planned to separate it later
but ran out of time.

The master branch is operational and has tests. The part_deux branch is the one
I was working on for a spit and polish, separation of concerns etc but didn't
rework my tests. 
